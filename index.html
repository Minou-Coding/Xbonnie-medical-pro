<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xBonnie M√©dical Pro - Diagnostics Avanc√©s</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 50%, #2a3441 100%);
            min-height: 100vh;
            padding: 0;
            color: #e8eaed;
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: #151922;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            min-height: 100vh;
            border-left: 1px solid #2a3441;
            border-right: 1px solid #2a3441;
        }

        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #1d4ed8 100%);
            color: #ffffff;
            padding: 40px 60px;
            position: relative;
            overflow: hidden;
            border-bottom: 3px solid #3b82f6;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><defs><pattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse"><path d="M 60 0 L 0 0 0 60" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .medical-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .header-text h1 {
            font-size: clamp(2rem, 4vw, 2.8rem);
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .header-text p {
            font-size: clamp(1rem, 2vw, 1.1rem);
            opacity: 0.9;
            font-weight: 400;
        }

        .header-status {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .controls {
            padding: 50px 60px;
            background: #1a1f2e;
            border-bottom: 1px solid #2a3441;
        }

        .controls-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .controls-header h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #e8eaed;
            margin-bottom: 12px;
        }

        .controls-header p {
            color: #9ca3af;
            font-size: 1rem;
        }

        .main-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .action-card {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            border: 1px solid #374151;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-color);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .action-card:hover::before {
            transform: scaleX(1);
        }

        .action-card:hover {
            background: linear-gradient(135deg, #334155, #475569);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .action-card.simple {
            --accent-color: #0ea5e9;
        }

        .action-card.complex {
            --accent-color: #8b5cf6;
        }

        .action-card.reset {
            --accent-color: #10b981;
        }

        .action-icon {
            width: 64px;
            height: 64px;
            background: var(--accent-color);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 24px;
            color: #ffffff;
        }

        .action-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #e8eaed;
            margin-bottom: 8px;
        }

        .action-description {
            color: #9ca3af;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .search-section {
            background: #1a1f2e;
            padding: 30px;
            border-radius: 16px;
            border: 1px solid #374151;
        }

        .search-group {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 16px;
            margin-bottom: 24px;
        }

        .search-input {
            background: #0f172a;
            border: 2px solid #374151;
            border-radius: 12px;
            padding: 16px 20px;
            font-size: 1rem;
            color: #e8eaed;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .search-input::placeholder {
            color: #6b7280;
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: #1e293b;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        .search-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: none;
            border-radius: 12px;
            padding: 16px 24px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 140px;
        }

        .search-btn:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .ai-search-section {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid #475569;
            position: relative;
            overflow: hidden;
        }

        .ai-search-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #10b981);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .ai-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #ffffff;
        }

        .ai-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #e8eaed;
        }

        .ai-subtitle {
            color: #9ca3af;
            font-size: 0.95rem;
        }

        .ai-search-group {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 16px;
        }

        .ai-search-input {
            background: #0f172a;
            border: 2px solid #475569;
            border-radius: 12px;
            padding: 18px 24px;
            font-size: 1rem;
            color: #e8eaed;
            font-style: italic;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .ai-search-input::placeholder {
            color: #6b7280;
        }

        .ai-search-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: #1e293b;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        .ai-search-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: none;
            border-radius: 12px;
            padding: 18px 28px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 160px;
        }

        .ai-search-btn:hover {
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 32px 0;
            flex-wrap: wrap;
        }

        .filter-tab {
            background: #1e293b;
            border: 2px solid #374151;
            border-radius: 25px;
            padding: 12px 24px;
            color: #9ca3af;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .filter-tab.active {
            background: #3b82f6;
            border-color: #3b82f6;
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .filter-tab:hover:not(.active) {
            background: #334155;
            border-color: #475569;
            color: #e8eaed;
        }

        .content {
            padding: 60px;
            background: #151922;
            min-height: 60vh;
        }

        .result-display {
            background: linear-gradient(135deg, #1e40af, #3730a3);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 48px;
            display: none;
            border: 1px solid #3b82f6;
            position: relative;
            overflow: hidden;
        }

        .result-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.05)"/></svg>');
            pointer-events: none;
        }

        .result-display.show {
            display: block;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 32px;
            position: relative;
            z-index: 2;
        }

        .result-icon {
            width: 56px;
            height: 56px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .result-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
        }

        .result-content {
            position: relative;
            z-index: 2;
            color: #e8eaed;
        }

        .patient-speech {
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3b82f6;
        }

        .patient-speech strong {
            color: #60a5fa;
        }

        .section-divider {
            margin: 48px 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #374151, transparent);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 32px;
        }

        .section-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #ffffff;
        }

        .section-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #e8eaed;
        }

        .section-subtitle {
            color: #9ca3af;
            font-size: 1rem;
            margin-left: auto;
        }

        .diagnostic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 24px;
        }

        .diagnostic-card {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid #374151;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .diagnostic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--card-accent);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .diagnostic-card:hover::before {
            transform: scaleX(1);
        }

        .diagnostic-card.simple {
            --card-accent: #0ea5e9;
        }

        .diagnostic-card.complex {
            --card-accent: #8b5cf6;
        }

        .diagnostic-card:hover {
            background: linear-gradient(135deg, #334155, #475569);
            transform: translateY(-6px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border-color: #475569;
        }

        .diagnostic-card.highlighted {
            background: linear-gradient(135deg, #1e40af, #3730a3);
            border-color: #3b82f6;
            transform: scale(1.02);
            box-shadow: 0 20px 60px rgba(59, 130, 246, 0.3);
        }

        .card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 24px;
            gap: 16px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #e8eaed;
            line-height: 1.3;
            flex: 1;
        }

        .severity-badge {
            background: var(--card-accent);
            color: #ffffff;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            flex-shrink: 0;
        }

        .card-section {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(55, 65, 81, 0.5);
        }

        .symptoms-section {
            background: rgba(14, 165, 233, 0.08);
            border-left: 3px solid #0ea5e9;
        }

        .patient-words-section {
            background: rgba(139, 92, 246, 0.08);
            border-left: 3px solid #8b5cf6;
        }

        .treatment-section {
            background: rgba(16, 185, 129, 0.08);
            border-left: 3px solid #10b981;
        }

        .section-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .symptoms-section .section-label {
            color: #60a5fa;
        }

        .patient-words-section .section-label {
            color: #a78bfa;
        }

        .treatment-section .section-label {
            color: #34d399;
        }

        .section-content {
            color: #cbd5e0;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .ai-results {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid #475569;
            display: none;
        }

        .ai-results.show {
            display: block;
            animation: slideIn 0.6s ease-out;
        }

        .ai-results-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .ai-results-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #e8eaed;
        }

        .suggestions-grid {
            display: grid;
            gap: 16px;
        }

        .suggestion-item {
            background: #0f172a;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #374151;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .suggestion-item:hover {
            background: #1e293b;
            border-color: #475569;
            transform: translateX(8px);
        }

        .suggestion-item.best-match {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.05);
        }

        .suggestion-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 16px;
            gap: 16px;
        }

        .suggestion-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #e8eaed;
            flex: 1;
        }

        .confidence-badges {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .confidence-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .confidence-high {
            background: #10b981;
            color: #ffffff;
        }

        .confidence-medium {
            background: #f59e0b;
            color: #ffffff;
        }

        .confidence-low {
            background: #6b7280;
            color: #ffffff;
        }

        .complexity-badge {
            background: #374151;
            color: #9ca3af;
        }

        .suggestion-preview {
            color: #9ca3af;
            font-style: italic;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .footer {
            background: #0f172a;
            color: #6b7280;
            text-align: center;
            padding: 32px 60px;
            border-top: 1px solid #374151;
            font-size: 0.9rem;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-title {
            color: #e8eaed;
            font-weight: 600;
            margin-bottom: 8px;
        }

        /* Nouvelles classes pour l'affichage conditionnel */
        .section-container {
            transition: all 0.5s ease;
        }

        .section-container.hidden {
            display: none !important;
        }

        .section-container.fade-out {
            opacity: 0;
            transform: translateY(-20px);
        }

        .section-container.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .header, .controls, .content, .footer {
                padding-left: 40px;
                padding-right: 40px;
            }

            .diagnostic-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header, .controls, .content, .footer {
                padding-left: 24px;
                padding-right: 24px;
            }

            .header {
                padding-top: 24px;
                padding-bottom: 24px;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .main-actions {
                grid-template-columns: 1fr;
            }

            .search-group, .ai-search-group {
                grid-template-columns: 1fr;
            }

            .diagnostic-grid {
                grid-template-columns: 1fr;
            }

            .filter-tabs {
                justify-content: stretch;
            }

            .filter-tab {
                flex: 1;
                text-align: center;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .section-subtitle {
                margin-left: 0;
            }
        }

        @media (max-width: 480px) {
            .header, .controls, .content, .footer {
                padding-left: 16px;
                padding-right: 16px;
            }

            .controls {
                padding-top: 32px;
                padding-bottom: 32px;
            }

            .content {
                padding-top: 32px;
                padding-bottom: 32px;
            }

            .action-card, .ai-search-section {
                padding: 24px;
            }

            .result-display {
                padding: 24px;
            }

            .diagnostic-card {
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="medical-icon">üè•</div>
                    <div class="header-text">
                        <h1>xBonnie M√©dical Pro</h1>
                        <p>Syst√®me Avanc√© de Diagnostics M√©dicaux</p>
                    </div>
                </div>
                <div class="header-status">
                    <div class="status-indicator"></div>
                    <span>Syst√®me Op√©rationnel</span>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="controls-header">
                <h2>Centre de Contr√¥le M√©dical</h2>
                <p>S√©lectionnez une action pour commencer le diagnostic</p>
            </div>

            <div class="main-actions">
                <div class="action-card simple" onclick="randomDiagnostic('simple')">
                    <div class="action-icon">ü©∫</div>
                    <div class="action-title">Cas Simple Al√©atoire</div>
                    <div class="action-description">G√©n√®re un diagnostic pour consultation courante ou sympt√¥me b√©nin</div>
                </div>
                
                <div class="action-card complex" onclick="randomDiagnostic('complex')">
                    <div class="action-icon">üö®</div>
                    <div class="action-title">Cas Complexe Al√©atoire</div>
                    <div class="action-description">G√©n√®re un diagnostic d'urgence vitale ou pathologie grave</div>
                </div>
                
                <div class="action-card reset" onclick="resetView()">
                    <div class="action-icon">üîÑ</div>
                    <div class="action-title">R√©initialiser Vue</div>
                    <div class="action-description">Efface les r√©sultats et remet √† z√©ro l'interface</div>
                </div>
            </div>

            <div class="search-section">
                <div class="search-group">
                    <input type="text" class="search-input" placeholder="Rechercher dans la base de diagnostics..." onkeyup="searchDiagnostics(this.value)" onkeydown="if(event.key==='Enter') searchDiagnostics(this.value)">
                    <button class="search-btn" onclick="searchDiagnostics(document.querySelector('.search-input').value)">üîç Rechercher</button>
                </div>
            </div>

            <div class="ai-search-section">
                <div class="ai-header">
                    <div class="ai-icon">ü§ñ</div>
                    <div>
                        <div class="ai-title">Diagnostic Intelligent par IA</div>
                        <div class="ai-subtitle">Analyse automatique des sympt√¥mes du patient</div>
                    </div>
                </div>
                <div class="ai-search-group">
                    <input type="text" class="ai-search-input" placeholder='D√©crivez les sympt√¥mes : "mal de t√™te", "douleur poitrine", "difficile respirer"...' onkeyup="debouncedIntelligentSearch(this.value)" onkeydown="if(event.key==='Enter') intelligentSearch(this.value)">
                    <button class="ai-search-btn" onclick="intelligentSearch(document.querySelector('.ai-search-input').value)">üéØ Analyser</button>
                </div>
            </div>

            <div class="filter-tabs">
                <div class="filter-tab active" onclick="filterCategory('all')">Tous les Diagnostics</div>
                <div class="filter-tab" onclick="filterCategory('simple')">Cas Simples</div>
                <div class="filter-tab" onclick="filterCategory('complex')">Cas Complexes</div>
            </div>
        </div>

        <div class="content">
            <div class="result-display" id="randomResult">
                <div class="result-header">
                    <div class="result-icon">üìã</div>
                    <div class="result-title" id="randomTitle">R√©sultat du Diagnostic</div>
                </div>
                <div class="result-content" id="randomContent">
                    <!-- Le contenu sera g√©n√©r√© par JavaScript -->
                </div>
            </div>

            <div class="ai-results" id="intelligentResults">
                <div class="ai-results-header">
                    <div class="ai-icon">ü§ñ</div>
                    <div class="ai-results-title">Diagnostics Sugg√©r√©s par IA</div>
                </div>
                <div class="suggestions-grid" id="suggestedDiagnostics">
                    <!-- Les suggestions seront g√©n√©r√©es par JavaScript -->
                </div>
            </div>

            <div class="section-container" id="allSectionsContainer">
                <div class="section-container" id="simpleContainer">
                    <div class="section-header" id="simpleSection">
                        <div class="section-icon">ü©∫</div>
                        <div>
                            <div class="section-title">Diagnostics Simples</div>
                        </div>
                        <div class="section-subtitle">Consultations courantes ‚Ä¢ 40 cas</div>
                    </div>
                    <div class="diagnostic-grid" id="simpleGrid">
                        <!-- Diagnostics simples g√©n√©r√©s par JavaScript -->
                    </div>
                </div>

                <div class="section-divider" id="sectionDivider"></div>

                <div class="section-container" id="complexContainer">
                    <div class="section-header" id="complexSection">
                        <div class="section-icon">üö®</div>
                        <div>
                            <div class="section-title">Diagnostics Complexes</div>
                        </div>
                        <div class="section-subtitle">Urgences vitales ‚Ä¢ 35 cas</div>
                    </div>
                    <div class="diagnostic-grid" id="complexGrid">
                        <!-- Diagnostics complexes g√©n√©r√©s par JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-content">
                <div class="footer-title">xBonnie M√©dical Pro</div>
                <p>¬© 2025 - Syst√®me professionnel de diagnostic m√©dical pour environnements de simulation FiveM</p>
            </div>
        </div>
    </div>

    <script>
        const simpleDiagnostics = [
            {
                title: "Mal de T√™te Ordinaire",
                symptoms: "Douleur l√©g√®re au front, fatigue",
                patientWords: "J'ai mal √† la t√™te depuis ce matin, c'est pas terrible...",
                treatment: "Prenez deux comprim√©s d'aspirine et reposez-vous. Buvez beaucoup d'eau. Si √ßa persiste plus de 24h, revenez me voir."
            },
            {
                title: "Rhume Classique",
                symptoms: "Nez qui coule, √©ternuements, gorge irrit√©e",
                patientWords: "Je me sens pas bien, j'arr√™te pas d'√©ternuer et j'ai le nez bouch√©...",
                treatment: "C'est un rhume banal. Restez au chaud, buvez des tisanes chaudes et reposez-vous. √áa va passer en quelques jours."
            },
            {
                title: "Petite Coupure au Doigt",
                symptoms: "Coupure superficielle, saignement l√©ger",
                patientWords: "Je me suis coup√© en cuisinant, √ßa saigne un peu...",
                treatment: "Je vais nettoyer et d√©sinfecter la plaie. Voici un pansement. Changez-le tous les jours et gardez-le sec."
            },
            {
                title: "Mal de Gorge L√©ger",
                symptoms: "Gorge irrit√©e, l√©g√®re difficult√© √† avaler",
                patientWords: "J'ai mal quand j'avale, √ßa gratte dans la gorge...",
                treatment: "Gargarisez-vous avec de l'eau sal√©e ti√®de 3 fois par jour. Prenez du miel et √©vitez les boissons froides."
            },
            {
                title: "√âraflure sur le Genou",
                symptoms: "Peau √©corch√©e, saignement minimal, salet√©",
                patientWords: "Je suis tomb√© en courant, j'ai √©corch√© mon genou...",
                treatment: "Je nettoie bien la plaie pour enlever les salet√©s. Voici une compresse. √âvitez de gratter et √ßa cicatrisera bien."
            },
            {
                title: "Mal de Ventre Digestif",
                symptoms: "Douleur abdominale l√©g√®re, ballonnements",
                patientWords: "J'ai mal au ventre depuis que j'ai mang√©, √ßa gargouille...",
                treatment: "C'est probablement digestif. Mangez l√©ger aujourd'hui, buvez de l'eau et reposez-vous. √âvitez les √©pices."
            },
            {
                title: "Fatigue G√©n√©rale",
                symptoms: "√âpuisement, manque d'√©nergie, somnolence",
                patientWords: "Je suis vraiment tr√®s fatigu√© en ce moment, j'arrive pas √† r√©cup√©rer...",
                treatment: "Vous manquez de sommeil. Dormez 8h par nuit, mangez √©quilibr√© et prenez des vitamines. √âvitez l'alcool."
            },
            {
                title: "Douleur au Dos (Tension)",
                symptoms: "Douleur musculaire dans le bas du dos",
                patientWords: "J'ai mal dans le bas du dos, surtout quand je me penche...",
                treatment: "C'est une tension musculaire. Appliquez du chaud, √©vitez les efforts et prenez un anti-inflammatoire si besoin."
            },
            {
                title: "Insomnie L√©g√®re",
                symptoms: "Difficult√©s d'endormissement, r√©veil nocturne",
                patientWords: "J'arrive pas √† dormir ces derniers temps, je tourne dans mon lit...",
                treatment: "√âvitez les √©crans avant de dormir, prenez une tisane de camomille et couchez-vous √† heure fixe. Pas de caf√© apr√®s 16h."
            },
            {
                title: "Yeux Irrit√©s",
                symptoms: "Rougeur oculaire, sensation de sable",
                patientWords: "J'ai les yeux qui piquent et qui sont tout rouges...",
                treatment: "Rincez vos yeux √† l'eau claire. √âvitez de les frotter. Utilisez des larmes artificielles et reposez vos yeux des √©crans."
            },
            {
                title: "Stress et Anxi√©t√© Mineure",
                symptoms: "Nervosit√©, palpitations l√©g√®res, inqui√©tude",
                patientWords: "Je me sens stress√© en ce moment, j'ai le c≈ìur qui bat vite parfois...",
                treatment: "Pratiquez la respiration profonde, faites du sport l√©ger et √©vitez la caf√©ine. Si √ßa persiste, consultez un psychologue."
            },
            {
                title: "Piq√ªre d'Insecte",
                symptoms: "Petite bosse rouge, d√©mangeaison localis√©e",
                patientWords: "Quelque chose m'a piqu√©, √ßa gratte et c'est tout rouge...",
                treatment: "Appliquez de la glace puis une cr√®me apaisante. Ne grattez pas. Si √ßa gonfle beaucoup, revenez me voir."
            },
            {
                title: "Crampe Musculaire",
                symptoms: "Contraction douloureuse soudaine du muscle",
                patientWords: "J'ai eu une crampe horrible dans la jambe qui m'a r√©veill√©...",
                treatment: "√âtirez doucement le muscle, massez et hydratez-vous bien. Mangez des bananes pour le potassium."
            },
            {
                title: "Acn√© L√©g√®re",
                symptoms: "Quelques boutons sur le visage",
                patientWords: "J'ai des boutons qui apparaissent sur le visage...",
                treatment: "Nettoyez votre visage matin et soir avec un savon doux. √âvitez de percer les boutons et hydratez avec une cr√®me non grasse."
            },
            {
                title: "Constipation L√©g√®re",
                symptoms: "Difficult√©s √† aller aux toilettes depuis 2-3 jours",
                patientWords: "√áa fait quelques jours que j'arrive pas √† aller aux toilettes normalement...",
                treatment: "Buvez plus d'eau, mangez des fibres (fruits, l√©gumes) et marchez un peu chaque jour. √áa devrait s'arranger."
            },
            {
                title: "R√®gles Douloureuses",
                symptoms: "Crampes abdominales pendant les menstruations",
                patientWords: "J'ai mes r√®gles et j'ai tr√®s mal au ventre, c'est normal ?",
                treatment: "C'est normal d'avoir mal. Appliquez une bouillotte chaude, prenez un antalgique et reposez-vous. √âvitez le stress."
            },
            {
                title: "Verrue Plantaire",
                symptoms: "Petite excroissance dure sous le pied",
                patientWords: "J'ai une bosse dure sous le pied qui fait mal quand je marche...",
                treatment: "C'est une verrue. Gardez vos pieds secs, utilisez un pansement rembourr√© et consultez un dermatologue pour l'enlever."
            },
            {
                title: "Ongles Incarn√©s",
                symptoms: "Douleur au coin de l'ongle, l√©g√®re rougeur",
                patientWords: "Mon orteil me fait mal sur le c√¥t√©, l'ongle s'enfonce dans la peau...",
                treatment: "Trempez votre pied dans l'eau ti√®de sal√©e. Coupez l'ongle droit, pas en rond. Portez des chaussures larges."
            },
            {
                title: "Hoquet Persistant",
                symptoms: "Spasmes r√©p√©t√©s du diaphragme",
                patientWords: "J'ai le hoquet depuis une heure, √ßa s'arr√™te pas...",
                treatment: "Buvez lentement un verre d'eau froide ou retenez votre respiration 10 secondes. √áa va passer, ne vous inqui√©tez pas."
            },
            {
                title: "√âcorchure Mineure",
                symptoms: "√âgratignure superficielle, peu de saignement",
                patientWords: "Je me suis √©gratign√© sur une branche, c'est pas profond...",
                treatment: "Je nettoie et d√©sinfecte. Voici un petit pansement. Surveillez que √ßa ne s'infecte pas. Changez le pansement demain."
            },
            {
                title: "Toux S√®che",
                symptoms: "Toux irritative sans expectoration",
                patientWords: "Je tousse beaucoup, surtout la nuit, √ßa m'emp√™che de dormir...",
                treatment: "Prenez du miel avant de dormir, humidifiez votre chambre et √©vitez les irritants comme la fum√©e. Buvez chaud."
            },
            {
                title: "Migraine L√©g√®re",
                symptoms: "Mal de t√™te unilat√©ral, sensibilit√© √† la lumi√®re",
                patientWords: "J'ai mal d'un c√¥t√© de la t√™te et la lumi√®re me d√©range...",
                treatment: "Reposez-vous dans le noir, appliquez du froid sur votre front et prenez un antalgique. √âvitez le bruit."
            },
            {
                title: "Diarrh√©e Passag√®re",
                symptoms: "Selles liquides fr√©quentes depuis ce matin",
                patientWords: "J'ai la diarrh√©e depuis ce matin, je dois souvent aller aux toilettes...",
                treatment: "Buvez beaucoup pour √©viter la d√©shydratation. Mangez du riz et des bananes. Si √ßa dure plus de 2 jours, revenez."
            },
            {
                title: "Naus√©e L√©g√®re",
                symptoms: "Sensation de haut-le-c≈ìur, malaise l√©ger",
                patientWords: "J'ai envie de vomir depuis ce matin, √ßa va et √ßa vient...",
                treatment: "Mangez l√©ger et fractionn√©. Buvez de l'eau par petites gorg√©es. √âvitez les odeurs fortes et reposez-vous."
            },
            {
                title: "Courbatures",
                symptoms: "Douleurs musculaires diffuses, raideur",
                patientWords: "J'ai mal partout dans le corps, surtout dans les jambes et le dos...",
                treatment: "Prenez un bain chaud, reposez-vous et hydratez-vous. C'est probablement viral. Prenez du parac√©tamol si besoin."
            },
            {
                title: "Fi√®vre L√©g√®re (38¬∞C)",
                symptoms: "Temp√©rature l√©g√®rement √©lev√©e, frissons",
                patientWords: "Je me sens chaud et j'ai des frissons, je pense que j'ai de la fi√®vre...",
                treatment: "Votre temp√©rature est √† 38¬∞C. Reposez-vous, buvez beaucoup et prenez du parac√©tamol. Surveillez si √ßa monte."
            },
            {
                title: "√âcorchure sur la Main",
                symptoms: "Peau abras√©e sur la paume, l√©g√®re douleur",
                patientWords: "Je suis tomb√© et je me suis √©corch√© la main sur le sol...",
                treatment: "Je nettoie bien pour enlever les impuret√©s. Voici un pansement adapt√©. Bougez normalement votre main."
            },
            {
                title: "Mal d'Oreille L√©ger",
                symptoms: "Douleur dans l'oreille, sensation de bouchon",
                patientWords: "J'ai mal dans l'oreille et j'entends moins bien de ce c√¥t√©...",
                treatment: "Ne mettez rien dans l'oreille. Prenez un antalgique et consultez si √ßa empire. √âvitez l'eau dans l'oreille."
            },
            {
                title: "Peau S√®che",
                symptoms: "D√©mangeaisons, peau qui tiraille",
                patientWords: "Ma peau me gratte et elle est toute s√®che, surtout sur les bras...",
                treatment: "Hydratez votre peau matin et soir avec une cr√®me. √âvitez les douches trop chaudes et les savons agressifs."
            },
            {
                title: "√âternuements Allergiques",
                symptoms: "√âternuements r√©p√©t√©s, nez qui coule clair",
                patientWords: "J'arr√™te pas d'√©ternuer et j'ai le nez qui coule comme de l'eau...",
                treatment: "C'est une allergie. Prenez un antihistaminique et √©vitez l'allerg√®ne si vous le connaissez. Rincez votre nez."
            },
            {
                title: "Bleu/H√©matome",
                symptoms: "Ecchymose violac√©e suite √† un choc",
                patientWords: "Je me suis cogn√© et j'ai un gros bleu qui est apparu...",
                treatment: "Appliquez de la glace les premi√®res heures, puis du chaud. Le bleu va changer de couleur et dispara√Ætre en 10 jours."
            },
            {
                title: "Gorge S√®che",
                symptoms: "Sensation de soif persistante, gorge r√™che",
                patientWords: "J'ai tout le temps soif et ma gorge est s√®che...",
                treatment: "Buvez r√©guli√®rement de l'eau, sucez des pastilles pour la gorge et humidifiez l'air de votre maison."
            },
            {
                title: "Petite Br√ªlure Cuisine",
                symptoms: "Rougeur sur la peau, douleur l√©g√®re",
                patientWords: "Je me suis br√ªl√© en cuisinant, c'est rouge et √ßa pique...",
                treatment: "Passez imm√©diatement sous l'eau froide 10 minutes. Appliquez une cr√®me apaisante. Ne percez pas les cloques."
            },
            {
                title: "Chevilles Gonfl√©es",
                symptoms: "≈íd√®me l√©ger aux chevilles en fin de journ√©e",
                patientWords: "Mes chevilles gonflent le soir, surtout quand il fait chaud...",
                treatment: "Sur√©levez vos jambes le soir, √©vitez de rester debout trop longtemps et marchez r√©guli√®rement dans la journ√©e."
            },
            {
                title: "Aphtes dans la Bouche",
                symptoms: "Petites ulc√©rations douloureuses sur la langue",
                patientWords: "J'ai des petits boutons dans la bouche qui me font mal pour manger...",
                treatment: "√âvitez les aliments acides et √©pic√©s. Utilisez un bain de bouche antiseptique et √ßa gu√©rira en une semaine."
            },
            {
                title: "Crampe d'Estomac",
                symptoms: "Douleur ponctuelle √† l'estomac",
                patientWords: "J'ai une douleur qui vient et qui part dans l'estomac...",
                treatment: "Mangez l√©ger, √©vitez l'alcool et le caf√©. Prenez une tisane de camomille et reposez-vous apr√®s les repas."
            },
            {
                title: "Vertiges L√©gers",
                symptoms: "Sensation de tournis en se levant",
                patientWords: "Quand je me l√®ve vite, j'ai la t√™te qui tourne un peu...",
                treatment: "Levez-vous plus lentement, hydratez-vous bien et √©vitez les mouvements brusques. C'est de l'hypotension."
            },
            {
                title: "Crampe au Mollet",
                symptoms: "Contraction douloureuse du muscle du mollet",
                patientWords: "J'ai eu une crampe terrible dans le mollet en dormant...",
                treatment: "√âtirez votre mollet en tirant vos orteils vers vous. Massez doucement et buvez plus d'eau. Mangez des bananes."
            },
            {
                title: "Petite Entorse de Poignet",
                symptoms: "Douleur au poignet, l√©ger gonflement",
                patientWords: "Je me suis tordu le poignet en tombant, √ßa fait mal mais je peux bouger...",
                treatment: "Mettez de la glace 15 minutes, 3 fois par jour. √âvitez les mouvements douloureux. Si √ßa empire, revenez."
            },
            {
                title: "Sinusite L√©g√®re",
                symptoms: "Sensation de pression au niveau des sinus",
                patientWords: "J'ai l'impression d'avoir la t√™te lourde, surtout au niveau du front...",
                treatment: "Faites des inhalations d'eau chaude, dormez la t√™te sur√©lev√©e et prenez un d√©congestionnant nasal si besoin."
            }
        ];

        const complexDiagnostics = [
            {
                title: "Arr√™t Cardiaque",
                symptoms: "Perte de conscience, absence de pouls, arr√™t respiratoire",
                patientWords: "Le patient ne r√©pond pas, ne respire plus...",
                treatment: "MASSAGE CARDIAQUE IMM√âDIAT ! 'Restez avec moi ! Je vais vous sauver !' D√©fibrillateur en urgence, adr√©naline IV. Transport code rouge."
            },
            {
                title: "Blessure par Balle - Thorax",
                symptoms: "Plaie perforante, saignement abondant, d√©tresse respiratoire",
                patientWords: "J'ai mal... je peux plus respirer... aidez-moi...",
                treatment: "'Vous allez vous en sortir ! Respirez calmement.' Compression directe, oxyg√®ne haut d√©bit, morphine IV. Chirurgie d'urgence."
            },
            {
                title: "Traumatisme Cr√¢nien S√©v√®re",
                symptoms: "Plaie au cr√¢ne, sang dans les oreilles, pupilles in√©gales",
                patientWords: "Ma t√™te... o√π je suis ? Qu'est-ce qui s'est pass√© ?",
                treatment: "'Vous √™tes en s√©curit√©, ne bougez pas.' Minerve cervicale, surveillance neurologique. Scanner c√©r√©bral urgent."
            },
            {
                title: "H√©morragie Massive",
                symptoms: "Perte de sang importante, p√¢leur extr√™me, pouls faible",
                patientWords: "J'ai froid... je vois flou... je vais mourir ?",
                treatment: "'Non, vous ne mourrez pas ! Je suis l√†.' Compression des points de saignement, perfusion massive, transfusion urgente."
            },
            {
                title: "Overdose de Drogue",
                symptoms: "Inconscience, respiration tr√®s lente, l√®vres bleues",
                patientWords: "Le patient est inconscient, ne r√©pond pas aux stimuli...",
                treatment: "'Vous m'entendez ? Restez avec moi !' Narcan IV imm√©diat, ventilation assist√©e, lavage gastrique si n√©cessaire."
            },
            {
                title: "Br√ªlures 3√®me Degr√© (60% du Corps)",
                symptoms: "Peau carbonis√©e, √©tat de choc, douleur extr√™me",
                patientWords: "√áa fait trop mal... je peux plus... aidez-moi s'il vous pla√Æt...",
                treatment: "'Je vais soulager votre douleur.' Morphine IV forte dose, perfusion massive, pansements sp√©ciaux. Centre des br√ªl√©s."
            },
            {
                title: "AVC Majeur",
                symptoms: "Paralysie faciale, troubles de la parole, confusion",
                patientWords: "Je... peux... plus... parler... normalement... mon bras...",
                treatment: "'Vous faites un AVC, on va vous soigner.' Position lat√©rale, oxyg√®ne, glyc√©mie. Transport stroke unit sous 3h."
            },
            {
                title: "√âlectrocution Haute Tension",
                symptoms: "Br√ªlures d'entr√©e/sortie, arr√™t cardiaque possible",
                patientWords: "Le patient a √©t√© trouv√© inconscient pr√®s de la ligne √©lectrique...",
                treatment: "'Vous √™tes en s√©curit√© maintenant.' Monitoring cardiaque continu, perfusion, surveillance des br√ªlures internes."
            },
            {
                title: "Pneumothorax Bilat√©ral",
                symptoms: "D√©tresse respiratoire extr√™me, cyanose, angoisse",
                patientWords: "Je peux pas respirer... j'√©touffe... aidez-moi vite...",
                treatment: "'Respirez avec moi, je vais vous aider.' Drainage thoracique bilat√©ral d'urgence, oxyg√®ne pur, s√©dation."
            },
            {
                title: "Polytraumatisme (Accident Grave)",
                symptoms: "Fractures multiples, h√©morragies, √©tat de choc",
                patientWords: "Tout me fait mal... mes jambes... je sens plus rien...",
                treatment: "'Vous √™tes entre de bonnes mains.' Immobilisation compl√®te, antalgiques majeurs, bilan l√©sionnel complet."
            },
            {
                title: "Embolie Pulmonaire Massive",
                symptoms: "Douleur thoracique, essoufflement extr√™me, malaise",
                patientWords: "Je peux plus respirer... √ßa fait mal dans la poitrine...",
                treatment: "'Restez calme, on va d√©boucher vos poumons.' Anticoagulants IV, oxyg√®ne, thrombolyse d'urgence."
            },
            {
                title: "Choc Anaphylactique",
                symptoms: "Gonflement g√©n√©ralis√©, chute tensionnelle, urticaire",
                patientWords: "√áa gonfle partout... je peux plus respirer... mes yeux...",
                treatment: "'C'est une allergie grave, je vous soigne.' Adr√©naline IM imm√©diate, cortico√Ødes IV, surveillance intensive."
            },
            {
                title: "Intoxication au Monoxyde de Carbone",
                symptoms: "Maux de t√™te violents, confusion, coma",
                patientWords: "Ma t√™te... j'arrive plus √† r√©fl√©chir... j'ai envie de vomir...",
                treatment: "'Vous avez respir√© du monoxyde.' Oxyg√®ne pur 100%, chambre hyperbare d'urgence, surveillance neurologique."
            },
            {
                title: "H√©morragie Digestive Massive",
                symptoms: "Vomissements de sang, selles noires, faiblesse",
                patientWords: "Je vomis du sang... j'ai peur... qu'est-ce qui m'arrive ?",
                treatment: "'C'est une h√©morragie, on va l'arr√™ter.' Perfusion massive, transfusion, endoscopie d'urgence pour caut√©riser."
            },
            {
                title: "Fracture Ouverte F√©morale",
                symptoms: "Os visible, saignement important, douleur extr√™me",
                patientWords: "Ma jambe... je vois l'os... √ßa fait trop mal... je vais vomir...",
                treatment: "'Je vais stabiliser votre jambe.' Immobilisation, morphine IV, pansement st√©rile, chirurgie orthop√©dique urgente."
            },
            {
                title: "Sepsis S√©v√®re",
                symptoms: "Fi√®vre √©lev√©e, frissons, confusion, hypotension",
                patientWords: "J'ai tr√®s froid... mais chaud aussi... je comprends plus rien...",
                treatment: "'Vous avez une infection grave.' Antibiotiques IV large spectre, perfusion, surveillance en r√©animation."
            },
            {
                title: "Coma Diab√©tique",
                symptoms: "Inconscience, respiration particuli√®re, haleine ac√©tonique",
                patientWords: "Le patient diab√©tique trouv√© inconscient chez lui...",
                treatment: "'Coma diab√©tique d√©tect√©.' Glyc√©mie urgente, insuline IV ou glucose selon r√©sultat, r√©animation."
            },
            {
                title: "Noyade avec Arr√™t Respiratoire",
                symptoms: "Inconscience, eau dans les poumons, cyanose",
                patientWords: "Patient sorti de l'eau inconscient, ne respire plus...",
                treatment: "'Je vais √©vacuer l'eau de vos poumons.' Ventilation forc√©e, aspiration bronchique, r√©chauffement corporel."
            },
            {
                title: "Crush Syndrome (√âcrasement)",
                symptoms: "Membre √©cras√© plusieurs heures, douleur extr√™me",
                patientWords: "Ma jambe... elle est coinc√©e depuis 3 heures... √ßa fait trop mal...",
                treatment: "'On va vous lib√©rer.' Perfusion avant d√©gagement, surveillance r√©nale, amputation possible √† discuter."
            },
            {
                title: "Plaie Jugulaire (Art√®re Sectionn√©e)",
                symptoms: "Saignement art√©riel pulsatile au cou, p√¢leur",
                patientWords: "Mon cou... √ßa saigne beaucoup... j'ai peur de mourir...",
                treatment: "'Regardez-moi, vous allez vivre.' Compression directe ferme, perfusion massive, chirurgie vasculaire d'urgence."
            },
            {
                title: "√âtat de Mal √âpileptique",
                symptoms: "Convulsions continues plus de 30 minutes",
                patientWords: "Patient en crise √©pileptique depuis 45 minutes...",
                treatment: "'Je vais arr√™ter les convulsions.' Diaz√©pam IV, ph√©nyto√Øne, protection voies a√©riennes, r√©animation."
            },
            {
                title: "Hypothermie S√©v√®re (<28¬∞C)",
                symptoms: "Temp√©rature tr√®s basse, rigidit√©, bradycardie",
                patientWords: "J'ai... si... froid... plus... sensation...",
                treatment: "'On va vous r√©chauffer progressivement.' R√©chauffement externe et interne, surveillance cardiaque, CEC si n√©cessaire."
            },
            {
                title: "Perforation Intestinale",
                symptoms: "Douleur abdominale atroce, d√©fense, fi√®vre",
                patientWords: "Mon ventre... √ßa fait atrocement mal... comme si √ßa explosait...",
                treatment: "'C'est votre intestin, on va op√©rer.' Perfusion, antibiotiques IV, laparotomie d'urgence, r√©animation."
            },
            {
                title: "Dissection Aortique",
                symptoms: "Douleur thoracique d√©chirante, diff√©rence tensionnelle",
                patientWords: "Ma poitrine... comme un couteau... √ßa d√©chire tout...",
                treatment: "'C'est votre aorte qui se d√©chire.' Antalgiques majeurs, contr√¥le tensionnel, chirurgie cardiaque d'urgence."
            },
            {
                title: "≈íd√®me Pulmonaire Aigu",
                symptoms: "Essoufflement extr√™me, mousse ros√©e, angoisse",
                patientWords: "Je me noie... j'√©touffe... de l'eau sort de ma bouche...",
                treatment: "'Votre c≈ìur fatigue, on va l'aider.' Position assise, oxyg√®ne, diur√©tiques IV, cardiologie d'urgence."
            },
            {
                title: "T√©tanie G√©n√©ralis√©e",
                symptoms: "Spasmes musculaires g√©n√©ralis√©s, contractures",
                patientWords: "Mes muscles... ils se contractent tout seuls... j'arrive plus √† bouger...",
                treatment: "'C'est le t√©tanos, je vous vaccine.' S√©rum antit√©tanique, relaxants musculaires, ventilation assist√©e."
            },
            {
                title: "Rupture de Rate",
                symptoms: "Douleur abdominale gauche, h√©morragie interne",
                patientWords: "J'ai mal sous les c√¥tes √† gauche... je me sens faible...",
                treatment: "'Votre rate saigne, on doit op√©rer.' Position Trendelenburg, perfusion massive, spl√©nectomie d'urgence."
            },
            {
                title: "M√©ningite Foudroyante",
                symptoms: "Maux de t√™te violents, raideur nuque, purpura",
                patientWords: "Ma t√™te va exploser... j'ai mal partout... des taches sur la peau...",
                treatment: "'C'est une m√©ningite.' Antibiotiques IV imm√©diate, cortico√Ødes, isolement, surveillance neurologique."
            },
            {
                title: "Trauma Abdominal P√©n√©trant",
                symptoms: "Objet enfonc√© dans l'abdomen, h√©morragie",
                patientWords: "Mon ventre... il y a quelque chose dedans... enlevez-le...",
                treatment: "'Ne bougez pas, on garde l'objet.' Stabilisation de l'objet, perfusion, laparotomie avec retrait contr√¥l√©."
            },
            {
                title: "Convulsions Hyperthermiques",
                symptoms: "Fi√®vre >41¬∞C, convulsions, inconscience",
                patientWords: "Patient trouv√© convulsant, tr√®s chaud au toucher...",
                treatment: "'Temp√©rature trop √©lev√©e.' Refroidissement externe agressif, anticonvulsivants, r√©animation neurologique."
            },
            {
                title: "D√©compression Explosive",
                symptoms: "Embolie gazeuse, douleurs articulaires, paralysie",
                patientWords: "J'ai mal dans toutes les articulations... je peux plus bouger les jambes...",
                treatment: "'Accident de d√©compression.' Oxyg√®ne pur, caisson hyperbare d'urgence, surveillance neurologique."
            },
            {
                title: "Choc H√©morragique Post-Partum",
                symptoms: "H√©morragie ut√©rine massive, chute tensionnelle",
                patientWords: "Je saigne beaucoup... je me sens partir... mon b√©b√© va bien ?",
                treatment: "'Votre b√©b√© va bien.' Massage ut√©rin, ocytocine IV, transfusion massive, hyst√©rectomie si √©chec."
            },
            {
                title: "Infarctus Massif Ant√©rieur",
                symptoms: "Douleur thoracique √©crasante, sueurs, angoisse",
                patientWords: "Ma poitrine... un √©l√©phant dessus... je vais mourir...",
                treatment: "'C'est votre c≈ìur, on va le d√©boucher.' Aspirine, thrombolyse, coronarographie d'urgence, r√©animation."
            },
            {
                title: "Luxation Cervicale Compl√®te",
                symptoms: "Paralysie compl√®te sous la l√©sion, d√©tresse respiratoire",
                patientWords: "Je peux plus bouger... rien du tout... j'ai peur...",
                treatment: "'Votre colonne est bless√©e.' Immobilisation absolue, ventilation assist√©e, r√©duction orthop√©dique urgente."
            },
            {
                title: "Pancr√©atite N√©crosante",
                symptoms: "Douleur abdominale transfixiante, vomissements",
                patientWords: "Mon ventre... √ßa traverse jusqu'au dos... c'est atroce...",
                treatment: "'Votre pancr√©as est enflamm√©.' Je√ªne strict, antalgiques majeurs, r√©animation, chirurgie si n√©crose."
            }
        ];

        let currentFilter = 'all';
        let searchTimeout;

        function initializePage() {
            renderDiagnostics();
            updateFilterButtons();
        }

        function randomDiagnostic(type) {
            let selectedDiagnostic;
            
            if (type === 'simple') {
                const randomIndex = Math.floor(Math.random() * simpleDiagnostics.length);
                selectedDiagnostic = simpleDiagnostics[randomIndex];
                document.getElementById('randomTitle').textContent = 'üçÉ Cas Simple S√©lectionn√©';
            } else {
                const randomIndex = Math.floor(Math.random() * complexDiagnostics.length);
                selectedDiagnostic = complexDiagnostics[randomIndex];
                document.getElementById('randomTitle').textContent = '‚ö° Cas Complexe S√©lectionn√©';
            }
            
            const resultDiv = document.getElementById('randomResult');
            const contentDiv = document.getElementById('randomContent');
            
            contentDiv.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #ffeb3b; font-size: 1.4rem;">
                    ${selectedDiagnostic.title}
                </h4>
                <div class="patient-speech">
                    <strong>üí¨ Le patient dit :</strong><br>
                    "${selectedDiagnostic.patientWords}"
                </div>
                <p style="margin: 15px 0; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px;">
                    <strong>üîç Sympt√¥mes observ√©s :</strong> ${selectedDiagnostic.symptoms}
                </p>
                <p style="margin: 15px 0; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #4CAF50;">
                    <strong>üó£Ô∏è R√©ponse √† donner :</strong><br>
                    "${selectedDiagnostic.treatment}"
                </p>
            `;
            
            resultDiv.classList.add('show');
            smoothScrollToElement(resultDiv);
        }

        function resetView() {
            document.getElementById('randomResult').classList.remove('show');
            document.getElementById('intelligentResults').style.display = 'none';
            document.querySelectorAll('.diagnostic-card').forEach(card => {
                card.classList.remove('highlighted');
            });
            document.querySelector('.search-input').value = '';
            document.querySelector('.ai-search-input').value = '';
            currentFilter = 'all';
            updateFilterButtons();
            renderDiagnostics();
            showAllSections();
        }

        function filterCategory(category) {
            currentFilter = category;
            updateFilterButtons();
            
            const simpleContainer = document.getElementById('simpleContainer');
            const complexContainer = document.getElementById('complexContainer');
            const sectionDivider = document.getElementById('sectionDivider');
            
            // R√©initialiser les r√©sultats d'abord
            document.getElementById('randomResult').classList.remove('show');
            document.getElementById('intelligentResults').style.display = 'none';
            
            if (category === 'simple') {
                // Afficher uniquement les cas simples
                simpleContainer.classList.remove('hidden');
                complexContainer.classList.add('hidden');
                sectionDivider.classList.add('hidden');
                
                // Modifier le titre de la section pour indiquer qu'on est en mode simple uniquement
                const simpleTitle = document.querySelector('#simpleSection .section-title');
                simpleTitle.textContent = 'Diagnostics Simples - Vue Exclusive';
                
                // Masquer les r√©sultats de recherche IA s'ils sont affich√©s
                document.getElementById('intelligentResults').style.display = 'none';
                
            } else if (category === 'complex') {
                // Afficher uniquement les cas complexes
                simpleContainer.classList.add('hidden');
                complexContainer.classList.remove('hidden');
                sectionDivider.classList.add('hidden');
                
                // Modifier le titre de la section pour indiquer qu'on est en mode complexe uniquement
                const complexTitle = document.querySelector('#complexSection .section-title');
                complexTitle.textContent = 'Diagnostics Complexes - Vue Exclusive';
                
                // Masquer les r√©sultats de recherche IA s'ils sont affich√©s
                document.getElementById('intelligentResults').style.display = 'none';
                
            } else {
                // Afficher toutes les sections (mode normal)
                showAllSections();
            }
            
            // D√©filer vers le contenu
            setTimeout(() => {
                document.querySelector('.content').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function showAllSections() {
            const simpleContainer = document.getElementById('simpleContainer');
            const complexContainer = document.getElementById('complexContainer');
            const sectionDivider = document.getElementById('sectionDivider');
            
            simpleContainer.classList.remove('hidden');
            complexContainer.classList.remove('hidden');
            sectionDivider.classList.remove('hidden');
            
            // Restaurer les titres originaux
            const simpleTitle = document.querySelector('#simpleSection .section-title');
            const complexTitle = document.querySelector('#complexSection .section-title');
            simpleTitle.textContent = 'Diagnostics Simples';
            complexTitle.textContent = 'Diagnostics Complexes';
        }

        function updateFilterButtons() {
            document.querySelectorAll('.filter-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const filterTexts = {
                'all': 'Tous les Diagnostics',
                'simple': 'Cas Simples', 
                'complex': 'Cas Complexes'
            };
            
            const activeBtn = [...document.querySelectorAll('.filter-tab')].find(btn => 
                btn.textContent.trim() === filterTexts[currentFilter]
            );
            
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
        }

        function renderDiagnostics(searchQuery = '') {
            if (currentFilter === 'all' || currentFilter === 'simple') {
                renderSimpleDiagnostics(searchQuery);
            }
            if (currentFilter === 'all' || currentFilter === 'complex') {
                renderComplexDiagnostics(searchQuery);
            }
        }

        function renderSimpleDiagnostics(searchQuery = '') {
            const grid = document.getElementById('simpleGrid');
            grid.innerHTML = '';

            const filteredDiagnostics = simpleDiagnostics.filter(d => 
                matchesSearch(d, searchQuery)
            );

            filteredDiagnostics.forEach((diagnostic, index) => {
                const card = createDiagnosticCard(diagnostic, 'simple', index);
                grid.appendChild(card);
            });
        }

        function renderComplexDiagnostics(searchQuery = '') {
            const grid = document.getElementById('complexGrid');
            grid.innerHTML = '';

            const filteredDiagnostics = complexDiagnostics.filter(d => 
                matchesSearch(d, searchQuery)
            );

            filteredDiagnostics.forEach((diagnostic, index) => {
                const card = createDiagnosticCard(diagnostic, 'complex', index);
                grid.appendChild(card);
            });
        }

        function matchesSearch(diagnostic, query) {
            if (!query) return true;
            const searchTerms = query.toLowerCase();
            return diagnostic.title.toLowerCase().includes(searchTerms) ||
                   diagnostic.symptoms.toLowerCase().includes(searchTerms) ||
                   diagnostic.patientWords.toLowerCase().includes(searchTerms) ||
                   diagnostic.treatment.toLowerCase().includes(searchTerms);
        }

        function createDiagnosticCard(diagnostic, type, index) {
            const card = document.createElement('div');
            card.className = `diagnostic-card ${type}`;
            card.innerHTML = `
                <div class="card-header">
                    <div class="card-title">${diagnostic.title}</div>
                    <span class="severity-badge">
                        ${type === 'simple' ? 'Simple' : 'Complexe'}
                    </span>
                </div>
                <div class="card-section symptoms-section">
                    <div class="section-label">
                        üîç Sympt√¥mes observ√©s
                    </div>
                    <div class="section-content">
                        ${diagnostic.symptoms}
                    </div>
                </div>
                <div class="card-section patient-words-section">
                    <div class="section-label">
                        üí¨ Ce que dit le patient
                    </div>
                    <div class="section-content">
                        "${diagnostic.patientWords}"
                    </div>
                </div>
                <div class="card-section treatment-section">
                    <div class="section-label">
                        üó£Ô∏è Que dire au patient / Actions
                    </div>
                    <div class="section-content">
                        "${diagnostic.treatment}"
                    </div>
                </div>
            `;
            
            return card;
        }

        function searchDiagnostics(query) {
            renderDiagnostics(query);
            
            // Mettre en √©vidence les correspondances si il y a une recherche
            if (query.trim()) {
                highlightSearchResults(query);
            }
        }

        function highlightSearchResults(query) {
            const searchTerms = query.toLowerCase();
            document.querySelectorAll('.diagnostic-card').forEach(card => {
                const cardText = card.textContent.toLowerCase();
                if (cardText.includes(searchTerms)) {
                    card.classList.add('highlighted');
                } else {
                    card.classList.remove('highlighted');
                }
            });
        }

        function debouncedIntelligentSearch(input) {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                intelligentSearch(input);
            }, 300);
        }

        function intelligentSearch(patientInput) {
            if (!patientInput || patientInput.trim().length < 2) {
                document.getElementById('intelligentResults').style.display = 'none';
                return;
            }

            const allDiagnostics = [
                ...simpleDiagnostics.map(d => ({...d, complexity: 'simple'})),
                ...complexDiagnostics.map(d => ({...d, complexity: 'complex'}))
            ];

            // Calcul des scores de correspondance avec le nouvel algorithme am√©lior√©
            const scoredResults = allDiagnostics.map(diagnostic => {
                const score = calculateAdvancedMatchScore(patientInput.toLowerCase(), diagnostic);
                return { ...diagnostic, score };
            });

            // Tri par score d√©croissant
            const sortedResults = scoredResults
                .filter(result => result.score > 5) // Seuil plus bas pour √™tre plus permissif
                .sort((a, b) => b.score - a.score)
                .slice(0, 8); // Plus de r√©sultats

            displayIntelligentResults(sortedResults, patientInput);
        }

        function calculateAdvancedMatchScore(patientInput, diagnostic) {
            const patientWords = diagnostic.patientWords.toLowerCase();
            const symptoms = diagnostic.symptoms.toLowerCase();
            const title = diagnostic.title.toLowerCase();
            const input = patientInput.toLowerCase();
            
            let score = 0;
            
            // === DICTIONNAIRE DE SYMPT√îMES INTELLIGENT ===
            const symptomDictionary = {
                // Douleurs - tr√®s flexible
                'douleur_tete': {
                    keywords: ['mal de t√™te', 'migraine', 'c√©phal√©e', 'crane', 'front', 'tempe'],
                    patterns: [
                        /\b(mal|douleur|fait mal|√©lance|lance|pique|tape).{0,20}(t√™te|crane|front|tempe|cr√¢ne)/i,
                        /\b(t√™te|crane|front|tempe|cr√¢ne).{0,20}(mal|douleur|fait mal|√©lance|lance|pique|tape)/i,
                        /\bmaux?\s+de\s+t√™te/i,
                        /\bmigraine/i,
                        /\bc√©phal√©e/i,
                        /\bj'?ai\s+mal\s+(√†\s+la\s+|dans\s+la\s+)?t√™te/i,
                        /\b√ßa\s+(fait\s+mal|√©lance|lance|pique|tape)\s+dans\s+la\s+t√™te/i,
                        /\bj'?ai\s+la\s+t√™te\s+qui\s+(fait\s+mal|√©lance|lance|explose)/i
                    ],
                    variations: ['mal t√™te', 'douleur t√™te', 'mal crane', 'mal front', 'migraine', 'c√©phal√©e']
                },
                
                'douleur_gorge': {
                    keywords: ['mal de gorge', 'pharyngite', 'angine', 'avaler'],
                    patterns: [
                        /\b(mal|douleur|fait mal|pique|gratte|irrit√©).{0,15}gorge/i,
                        /\bgorge.{0,15}(mal|douleur|fait mal|pique|gratte|irrit√©)/i,
                        /\bj'?ai\s+mal\s+(quand\s+j'?|pour\s+)?avale/i,
                        /\b√ßa\s+(gratte|pique|fait mal|irrite)\s+(dans\s+la\s+)?gorge/i,
                        /\bj'?arrive\s+pas\s+√†\s+avaler/i,
                        /\bpharyngite|angine/i
                    ],
                    variations: ['mal gorge', 'gorge fait mal', 'avaler mal', 'gorge pique', 'gorge gratte']
                },
                
                'douleur_ventre': {
                    keywords: ['mal de ventre', 'gastrite', 'crampe', 'indigestion', 'abdomen', 'estomac'],
                    patterns: [
                        /\b(mal|douleur|crampe|spasme).{0,15}(ventre|estomac|abdomen)/i,
                        /\b(ventre|estomac|abdomen).{0,15}(mal|douleur|crampe|spasme|fait mal)/i,
                        /\bj'?ai\s+mal\s+au\s+(ventre|estomac)/i,
                        /\b√ßa\s+(gargouille|fait mal|crampe|tire)\s+(dans\s+le\s+)?(ventre|estomac)/i,
                        /\bcramp|gastrite|indigestion/i,
                        /\bmaux?\s+de\s+ventre/i
                    ],
                    variations: ['mal ventre', 'douleur ventre', 'mal estomac', 'crampe ventre', 'ventre fait mal']
                },
                
                'douleur_dos': {
                    keywords: ['mal de dos', 'lombalgie', 'sciatique', 'lombaire'],
                    patterns: [
                        /\b(mal|douleur|fait mal|lance|tire).{0,15}dos/i,
                        /\bdos.{0,15}(mal|douleur|fait mal|lance|tire)/i,
                        /\blombaire|lombalgie|sciatique/i,
                        /\bj'?ai\s+mal\s+(dans\s+le\s+|au\s+)?(bas\s+du\s+)?dos/i,
                        /\b√ßa\s+(lance|tire|fait mal)\s+dans\s+le\s+dos/i
                    ],
                    variations: ['mal dos', 'douleur dos', 'dos fait mal', 'lombalgie', 'sciatique']
                },
                
                'douleur_poitrine': {
                    keywords: ['douleur thoracique', 'mal poitrine', 'crise cardiaque', 'infarctus', 'angine'],
                    patterns: [
                        /\b(mal|douleur|fait mal|serre|oppresse).{0,15}(poitrine|thorax|torse)/i,
                        /\b(poitrine|thorax|torse).{0,15}(mal|douleur|fait mal|serre|oppresse)/i,
                        /\bj'?ai\s+mal\s+(dans\s+la\s+|√†\s+la\s+)?poitrine/i,
                        /\b√ßa\s+(serre|oppresse|fait mal)\s+(dans\s+la\s+)?poitrine/i,
                        /\binfarctus|crise\s+cardiaque|angine/i,
                        /\bc≈ìur.{0,15}(mal|fait mal|serre)/i
                    ],
                    variations: ['mal poitrine', 'douleur poitrine', 'poitrine serre', 'mal c≈ìur', 'infarctus']
                },
                
                // Sympt√¥mes respiratoires
                'difficulte_respirer': {
                    keywords: ['dyspn√©e', 'asthme', 'pneumothorax', '≈ìd√®me pulmonaire', 'essoufflement'],
                    patterns: [
                        /\b(difficile|dur|arrive pas|peux pas|mal).{0,15}(respir|souffle)/i,
                        /\b(respir|souffle).{0,15}(difficile|dur|court|coup√©)/i,
                        /\bj'?arrive\s+pas\s+√†\s+respirer/i,
                        /\bj'?ai\s+du\s+mal\s+√†\s+respirer/i,
                        /\bessouffl|dyspn√©e|asthme/i,
                        /\bje\s+(suffoque|√©touffe|manque\s+d'air)/i,
                        /\bplus\s+respirer|peux\s+plus\s+respirer/i
                    ],
                    variations: ['difficile respirer', 'mal respirer', 'plus respirer', 'essoufflement', 'suffoque', '√©touffe']
                },
                
                'toux': {
                    keywords: ['toux', 'bronchite', 'rhume', 'expectoration'],
                    patterns: [
                        /\btousse?|toussote/i,
                        /\bj'?arr√™te\s+pas\s+de\s+tousser/i,
                        /\b√ßa\s+me\s+fait\s+tousser/i,
                        /\bbronchite/i
                    ],
                    variations: ['tousse', 'touss√©', 'toux', 'bronchite']
                },
                
                'eternuements_nez': {
                    keywords: ['rhume', 'allergie', 'rhinite', 'nez bouch√©', '√©ternuements'],
                    patterns: [
                        /\b√©ternue|atchoum/i,
                        /\bnez.{0,15}(coule|bouch√©|pris)/i,
                        /\bj'?arr√™te\s+pas\s+d'√©ternuer/i,
                        /\brhume|rhinite|allergie/i,
                        /\bj'?ai\s+le\s+nez\s+(qui\s+coule|bouch√©)/i
                    ],
                    variations: ['√©ternue', 'rhume', 'nez coule', 'nez bouch√©', 'allergie']
                },
                
                // Sympt√¥mes digestifs
                'nausee_vomissement': {
                    keywords: ['naus√©e', 'vomissement', 'gastro', 'mal au c≈ìur'],
                    patterns: [
                        /\bvomis|vomir|rendre/i,
                        /\bnaus√©e/i,
                        /\benvie\s+de\s+vomir/i,
                        /\bj'?ai\s+mal\s+au\s+c≈ìur/i,
                        /\b√ßa\s+(remonte|me\s+donne\s+envie\s+de\s+vomir)/i,
                        /\bgastro/i
                    ],
                    variations: ['naus√©e', 'vomis', 'vomir', 'mal c≈ìur', 'gastro']
                },
                
                'diarrhee': {
                    keywords: ['diarrh√©e', 'gastro', 'turista', 'selles liquides'],
                    patterns: [
                        /\bdiarrh√©e|courante/i,
                        /\bselles\s+(liquides|molles)/i,
                        /\bj'?ai\s+la\s+courante/i,
                        /\bje\s+vais\s+souvent\s+aux\s+toilettes/i,
                        /\bgastro/i
                    ],
                    variations: ['diarrh√©e', 'courante', 'gastro', 'selles liquides']
                },
                
                // Traumatismes et blessures
                'blessure_coupure': {
                    keywords: ['coupure', 'plaie', 'h√©morragie', 'saignement', 'blessure'],
                    patterns: [
                        /\b(coup√©|coupure|bless√©|blessure|plaie)/i,
                        /\b(saigne|sang|h√©morragie)/i,
                        /\bje\s+me\s+suis\s+(coup√©|bless√©)/i,
                        /\b√ßa\s+saigne/i,
                        /\bj'?ai\s+une\s+(plaie|coupure|blessure)/i
                    ],
                    variations: ['coup√©', 'coupure', 'saigne', 'sang', 'bless√©', 'plaie']
                },
                
                'chute_trauma': {
                    keywords: ['chute', 'traumatisme', 'contusion', 'fracture', 'tomb√©'],
                    patterns: [
                        /\b(tomb√©|chute|chut√©)/i,
                        /\bje\s+suis\s+tomb√©/i,
                        /\bj'?ai\s+fait\s+une\s+chute/i,
                        /\b(cogn√©|frapp√©|heurt√©)/i,
                        /\b(h√©matome|bleu|ecchymose)/i,
                        /\bfracture|cass√©/i
                    ],
                    variations: ['tomb√©', 'chute', 'cogn√©', 'h√©matome', 'bleu', 'fracture']
                },
                
                'brulure': {
                    keywords: ['br√ªlure', '√©chaudure', 'br√ªl√©'],
                    patterns: [
                        /\bbr√ªl/i,
                        /\bje\s+me\s+suis\s+br√ªl√©/i,
                        /\b√ßa\s+br√ªle/i,
                        /\b√©chaud/i,
                        /\bcuisine.{0,10}br√ªl/i
                    ],
                    variations: ['br√ªl√©', 'br√ªlure', 'br√ªle', '√©chaudure']
                },
                
                // Urgences vitales
                'urgence_cardiaque': {
                    keywords: ['infarctus', 'crise cardiaque', 'angine de poitrine', 'arr√™t cardiaque'],
                    patterns: [
                        /\b(c≈ìur|coeur).{0,15}(mal|douleur|serre|arr√™te)/i,
                        /\bj'?ai\s+mal\s+(dans\s+la\s+|√†\s+la\s+)?poitrine/i,
                        /\b√ßa\s+serre\s+(dans\s+la\s+)?poitrine/i,
                        /\binfarctus|crise\s+cardiaque/i,
                        /\bangine\s+de\s+poitrine/i,
                        /\barr√™t\s+cardiaque/i
                    ],
                    variations: ['infarctus', 'crise cardiaque', 'mal c≈ìur', 'angine', 'arr√™t cardiaque']
                },
                
                'urgence_neurologique': {
                    keywords: ['AVC', 'paralysie', 'h√©mipl√©gie', 'stroke', 'accident vasculaire'],
                    patterns: [
                        /\b(paralys√©|paralysie|bouge\s+plus|sens\s+plus)/i,
                        /\bje\s+(peux\s+plus|ne\s+peux\s+plus)\s+bouger/i,
                        /\bj'?ai\s+plus\s+de\s+sensations/i,
                        /\bAVC|accident\s+vasculaire|stroke/i,
                        /\bh√©mipl√©gie|paralysie/i,
                        /\bje\s+sens\s+plus\s+(mon\s+bras|ma\s+jambe)/i
                    ],
                    variations: ['AVC', 'paralys√©', 'paralysie', 'plus bouger', 'h√©mipl√©gie', 'accident vasculaire']
                },
                
                'perte_connaissance': {
                    keywords: ['malaise', 'syncope', '√©vanouissement', 'inconscient'],
                    patterns: [
                        /\b(inconscient|√©vanoui|connaissance)/i,
                        /\bje\s+me\s+suis\s+√©vanoui/i,
                        /\bj'?ai\s+perdu\s+connaissance/i,
                        /\bmalaise|syncope/i,
                        /\bje\s+tombe\s+dans\s+les\s+pommes/i
                    ],
                    variations: ['√©vanoui', 'malaise', 'inconscient', 'syncope', 'perte connaissance']
                },
                
                // Sympt√¥mes g√©n√©raux
                'fievre': {
                    keywords: ['fi√®vre', 'hyperthermie', 'infection', 'temp√©rature'],
                    patterns: [
                        /\bfi√®vre|fievre/i,
                        /\bj'?ai\s+(chaud|de\s+la\s+temp√©rature)/i,
                        /\bfrissons/i,
                        /\btemp√©rature|hyperthermie/i,
                        /\bje\s+suis\s+(br√ªlant|en\s+feu)/i,
                        /\binfection/i
                    ],
                    variations: ['fi√®vre', 'temp√©rature', 'frissons', 'chaud', 'hyperthermie']
                },
                
                'fatigue': {
                    keywords: ['fatigue', 'asth√©nie', '√©puisement', 'faiblesse'],
                    patterns: [
                        /\b(fatigu√©|√©puis√©|crev√©|lessiv√©)/i,
                        /\bj'?ai\s+pas\s+d'√©nergie/i,
                        /\bje\s+(n'arrive\s+pas\s+√†\s+r√©cup√©rer|suis\s+√†\s+bout)/i,
                        /\b(lassi|faiblesse|asth√©nie)/i,
                        /\bje\s+suis\s+(vid√©|sans\s+force)/i
                    ],
                    variations: ['fatigu√©', '√©puis√©', 'fatigue', 'asth√©nie', 'pas √©nergie']
                },
                
                'stress_anxiete': {
                    keywords: ['stress', 'anxi√©t√©', 'angoisse', 'panique', 'nerveux'],
                    patterns: [
                        /\b(stress√©|anxieux|angoisse|panique|nerveux)/i,
                        /\bj'?ai\s+(peur|les\s+nerfs)/i,
                        /\bje\s+suis\s+(inquiet|tendu)/i,
                        /\b(c≈ìur|coeur)\s+qui\s+bat\s+(vite|fort)/i,
                        /\bpalpitations/i,
                        /\bje\s+suis\s+sur\s+les\s+nerfs/i
                    ],
                    variations: ['stress√©', 'anxieux', 'angoisse', 'panique', 'nerveux', 'peur']
                },
                
                'allergie_reaction': {
                    keywords: ['allergie', 'urticaire', 'ecz√©ma', 'anaphylaxie', 'd√©mangeaison'],
                    patterns: [
                        /\b(allergie|allergique|gonfle|d√©mangeaison|gratte)/i,
                        /\b√ßa\s+me\s+gratte/i,
                        /\bj'?ai\s+des\s+(boutons|plaques)/i,
                        /\burticaire|ecz√©ma|anaphylaxie/i,
                        /\bpiq√ªre|piqu√©/i,
                        /\b√ßa\s+me\s+d√©mange/i
                    ],
                    variations: ['allergie', 'gratte', 'd√©mangeaison', 'urticaire', 'gonfle', 'boutons']
                }
            };
            
            // === √âVALUATION INTELLIGENTE DES SYMPT√îMES ===
            for (const [symptomType, data] of Object.entries(symptomDictionary)) {
                let symptomScore = 0;
                let hasPatternMatch = false;
                
                // Test des patterns regex (score √©lev√©)
                for (const pattern of data.patterns) {
                    if (pattern.test(input)) {
                        hasPatternMatch = true;
                        break;
                    }
                }
                
                // Test des variations simples (score moyen)
                let hasVariationMatch = false;
                for (const variation of data.variations) {
                    if (input.includes(variation)) {
                        hasVariationMatch = true;
                        break;
                    }
                }
                
                // V√©rifier si le diagnostic correspond √† ce type de sympt√¥me
                const diagnosticText = (title + ' ' + symptoms + ' ' + patientWords).toLowerCase();
                const isRelevantDiagnostic = data.keywords.some(keyword => 
                    diagnosticText.includes(keyword.toLowerCase())
                );
                
                if (isRelevantDiagnostic) {
                    if (hasPatternMatch) {
                        symptomScore += 80; // Score tr√®s √©lev√© pour correspondance de pattern
                    } else if (hasVariationMatch) {
                        symptomScore += 50; // Score √©lev√© pour variation
                    }
                }
                
                score += symptomScore;
            }
            
            // === CORRESPONDANCES DE MOTS-CL√âS FLEXIBLES ===
            const inputWords = input.split(/\s+/).filter(word => word.length > 2);
            const diagnosticText = (title + ' ' + symptoms + ' ' + patientWords).toLowerCase();
            
            // Correspondance directe de mots
            for (const word of inputWords) {
                if (word.length > 2) {
                    // Correspondance exacte
                    if (patientWords.includes(word)) {
                        score += 25;
                    } else if (symptoms.includes(word)) {
                        score += 20;
                    } else if (title.includes(word)) {
                        score += 15;
                    }
                    
                    // Correspondance partielle (racine du mot)
                    if (word.length > 4) {
                        const wordRoot = word.substring(0, word.length - 2);
                        if (diagnosticText.includes(wordRoot)) {
                            score += 10;
                        }
                    }
                }
            }
            
            // === SYNONYMES ET VARIATIONS LINGUISTIQUES ===
            const synonymGroups = {
                'douleur': ['mal', 'souffrance', 'fait mal', 'douloureux', '√©lance', 'tire', 'pince', 'lance'],
                'difficile': ['dur', 'compliqu√©', 'arrive pas', 'peux pas', 'impossible', 'gal√®re'],
                'beaucoup': ['tr√®s', 'vraiment', '√©norm√©ment', 'super', 'trop', 'grave'],
                'depuis': ['√ßa fait', 'il y a', 'd√©j√†', 'voil√†'],
                'temps': ['moment', 'bout de temps', 'un moment', 'longtemps', 'dur√©e'],
                'soudain': ['d\'un coup', 'tout d\'un coup', 'subitement', 'brusquement', 'direct'],
                'toujours': ['sans arr√™t', 'constamment', 'en permanence', 'tout le temps', 'non-stop']
            };
            
            // Correspondance par synonymes
            for (const word of inputWords) {
                for (const [baseWord, synonyms] of Object.entries(synonymGroups)) {
                    if (synonyms.includes(word.toLowerCase()) && diagnosticText.includes(baseWord)) {
                        score += 15;
                    }
                    if (word.toLowerCase() === baseWord && synonyms.some(syn => diagnosticText.includes(syn))) {
                        score += 15;
                    }
                }
            }
            
            // === BONUS CONTEXTUELS ===
            
            // Bonus pour correspondances multiples
            const matchingWords = inputWords.filter(word => 
                word.length > 2 && diagnosticText.includes(word.toLowerCase())
            ).length;
            
            if (matchingWords > 1) {
                score += matchingWords * 8;
            }
            
            // Bonus pour similarit√© de phrases
            if (input.length > 15 && patientWords.length > 15) {
                const similarity = calculatePhraseSimilarity(input, patientWords);
                score += similarity * 30;
            }
            
            // Bonus pour correspondance de longueur d'input appropri√©e
            if (input.length > 10 && input.length < 100) {
                score += 5; // Bonus pour input de longueur raisonnable
            }
            
            // === AJUSTEMENTS FINAUX ===
            
            // Malus si aucune pertinence d√©tect√©e
            const hasMinimalRelevance = inputWords.some(word => 
                word.length > 3 && (
                    diagnosticText.includes(word) || 
                    diagnosticText.includes(word.substring(0, word.length - 1))
                )
            );
            
            if (!hasMinimalRelevance && input.length > 8) {
                score = Math.max(0, score - 25);
            }
            
            // Bonus pour diagnostic de m√™me complexit√© que les mots de l'input
            const hasComplexWords = /\b(arr√™t|h√©morragie|traumatisme|fracture|urgence|grave|s√©v√®re)\b/i.test(input);
            const hasSimpleWords = /\b(l√©ger|petit|simple|b√©nin|normal)\b/i.test(input);
            
            if (hasComplexWords && diagnostic.complexity === 'complex') {
                score += 20;
            } else if (hasSimpleWords && diagnostic.complexity === 'simple') {
                score += 15;
            }
            
            return Math.round(Math.max(0, score));
        }

        function calculatePhraseSimilarity(str1, str2) {
            const words1 = str1.toLowerCase().split(/\s+/).filter(w => w.length > 2);
            const words2 = str2.toLowerCase().split(/\s+/).filter(w => w.length > 2);
            
            let commonWords = 0;
            let partialMatches = 0;
            
            for (const word1 of words1) {
                for (const word2 of words2) {
                    // Correspondance exacte
                    if (word1 === word2) {
                        commonWords++;
                        break;
                    }
                    // Correspondance partielle (m√™me racine)
                    else if (word1.length > 3 && word2.length > 3) {
                        const minLength = Math.min(word1.length, word2.length);
                        if (minLength >= 4) {
                            const commonChars = Math.min(4, minLength - 1);
                            if (word1.substring(0, commonChars) === word2.substring(0, commonChars)) {
                                partialMatches += 0.5;
                                break;
                            }
                        }
                    }
                }
            }
            
            const totalMatches = commonWords + partialMatches;
            return totalMatches / Math.max(words1.length, words2.length, 1);
        }

        function displayIntelligentResults(results, patientInput) {
            const resultsDiv = document.getElementById('intelligentResults');
            const suggestionsDiv = document.getElementById('suggestedDiagnostics');
            
            if (results.length === 0) {
                suggestionsDiv.innerHTML = '<p style="color: #9ca3af; font-style: italic; padding: 20px; text-align: center;">Aucun diagnostic trouv√© pour ces sympt√¥mes. Essayez des descriptions plus pr√©cises comme "mal de t√™te", "difficile respirer", "douleur poitrine"...</p>';
                resultsDiv.classList.add('show');
                smoothScrollToElement(resultsDiv);
                return;
            }
            
            suggestionsDiv.innerHTML = '';
            
            results.forEach((result, index) => {
                const confidence = getConfidenceLevel(result.score);
                const isBestMatch = index === 0 && result.score > 40;
                
                const card = document.createElement('div');
                card.className = `suggestion-item ${isBestMatch ? 'best-match' : ''}`;
                card.onclick = () => selectDiagnostic(result, patientInput);
                
                // Am√©lioration pour l'accessibilit√©
                card.setAttribute('tabindex', '0');
                card.setAttribute('role', 'button');
                card.setAttribute('aria-label', `Diagnostic sugg√©r√©: ${result.title}`);
                
                // Support du clavier
                card.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        selectDiagnostic(result, patientInput);
                    }
                });
                
                card.innerHTML = `
                    <div class="suggestion-header">
                        <div class="suggestion-title">${result.title}</div>
                        <div class="confidence-badges">
                            <span class="confidence-badge ${confidence.class}">${confidence.text}</span>
                            <span class="confidence-badge complexity-badge">${result.complexity === 'simple' ? 'Simple' : 'Complexe'}</span>
                        </div>
                    </div>
                    <div class="suggestion-preview">"${result.patientWords}"</div>
                    <div style="font-size: 12px; color: #6b7280; margin-top: 8px;">Score de correspondance: ${result.score}%</div>
                `;
                
                suggestionsDiv.appendChild(card);
            });
            
            resultsDiv.classList.add('show');
            smoothScrollToElement(resultsDiv);
        }

        function getConfidenceLevel(score) {
            if (score >= 70) return { text: 'Excellente', class: 'confidence-high' };
            if (score >= 40) return { text: 'Bonne', class: 'confidence-medium' };
            if (score >= 15) return { text: 'Possible', class: 'confidence-low' };
            return { text: 'Faible', class: 'confidence-low' };
        }

        function selectDiagnostic(diagnostic, patientInput) {
            // Afficher le diagnostic s√©lectionn√© dans la zone de r√©sultat al√©atoire
            const resultDiv = document.getElementById('randomResult');
            const contentDiv = document.getElementById('randomContent');
            const titleDiv = document.getElementById('randomTitle');
            
            titleDiv.textContent = 'üéØ Diagnostic Sugg√©r√© par IA';
            
            contentDiv.innerHTML = `
                <div style="background: rgba(16, 185, 129, 0.15); padding: 16px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <strong>ü§ñ Analyse de l'IA :</strong> "${patientInput}"
                </div>
                <h4 style="margin-bottom: 20px; color: #fbbf24; font-size: 1.5rem; font-weight: 700;">
                    ${diagnostic.title}
                </h4>
                <div class="patient-speech">
                    <strong>üí¨ Le patient dit :</strong><br>
                    "${diagnostic.patientWords}"
                </div>
                <div style="margin: 20px 0; background: rgba(59, 130, 246, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #3b82f6;">
                    <strong>üîç Sympt√¥mes observ√©s :</strong><br>
                    ${diagnostic.symptoms}
                </div>
                <div style="margin: 20px 0; background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #10b981;">
                    <strong>üó£Ô∏è R√©ponse √† donner :</strong><br>
                    "${diagnostic.treatment}"
                </div>
                <div style="display: flex; gap: 16px; margin-top: 20px; flex-wrap: wrap;">
                    <div style="padding: 12px 16px; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border: 1px solid rgba(139, 92, 246, 0.3);">
                        <strong>üìä Complexit√© :</strong> 
                        <span style="color: ${diagnostic.complexity === 'simple' ? '#10b981' : '#f59e0b'}; font-weight: 600;">
                            ${diagnostic.complexity === 'simple' ? 'Cas Simple' : 'Cas Complexe'}
                        </span>
                    </div>
                    <div style="padding: 12px 16px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3);">
                        <strong>üéØ IA Confidence :</strong> 
                        <span style="color: #3b82f6; font-weight: 600;">${diagnostic.score}%</span>
                    </div>
                </div>
            `;
            
            resultDiv.classList.add('show');
            smoothScrollToElement(resultDiv);
            
            // Masquer les r√©sultats de recherche
            document.getElementById('intelligentResults').style.display = 'none';
            document.querySelector('.ai-search-input').value = '';
        }

        function smoothScrollToElement(element) {
            const headerHeight = document.querySelector('.header').offsetHeight;
            const controlsHeight = document.querySelector('.controls').offsetHeight;
            const offset = headerHeight + controlsHeight + 20;
            
            const elementPosition = element.offsetTop - offset;
            
            window.scrollTo({
                top: Math.max(0, elementPosition),
                behavior: 'smooth'
            });
        }

        // Initialize page on load
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
